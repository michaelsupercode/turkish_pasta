!function(){"use strict";function e(e){var t={},s=function(){try{var t="__some_random_key_you_are_not_going_to_use__";return e().setItem(t,t),e().removeItem(t),!0}catch(s){return!1}}();return{getItem:function(o){return s?e().getItem(o):Object.prototype.hasOwnProperty.call(t,o)?t[o]:null},setItem:function(o,n){s?e().setItem(o,n):t[o]=String(n)},removeItem:function(o){s?e().removeItem(o):delete t[o]},supported:s}}var t={local:e((function(){return localStorage})),session:e((function(){return sessionStorage}))};new(function(){function e(){this.scheme=null,this.store=t.local.supported,this.disabled=this.validate(document.documentElement.dataset.colorScheme),this.buttons=[],document.addEventListener("readystatechange",this),window.addEventListener("colorscheme",this),this.get()}var s=e.prototype;return s.handleEvent=function(e){switch(e.type){case"colorscheme":this.set(e.detail);break;case"readystatechange":this.initUI(),document.removeEventListener("readystatechange",this);break;case"click":this.set(e.target.value,!0),window.dispatchEvent(new CustomEvent("colorscheme",{detail:e.target.value}))}},s.get=function(){if(this.store){var e=t.local.getItem("color-scheme");this.validate(e)&&this.set(e)}this.dispatch("get")},s.set=function(e,s){this.disabled||e!==this.scheme&&(e&&!this.validate(e)||(this.scheme&&document.documentElement.classList.remove("color-scheme-"+this.scheme),e?(this.store&&t.local.setItem("color-scheme",e),document.documentElement.classList.add("color-scheme-"+e),this.scheme=e):(this.store&&t.local.removeItem("color-scheme"),this.scheme=null),s&&this.dispatch("set"),this.select()))},s.initUI=function(){if(this.colorschemeControlWrapper=document.querySelector("#js-colorscheme-toggle"),this.colorschemeControlWrapper){if(!this.store||this.disabled){var e=this.colorschemeControlWrapper.parentNode,t=e.parentNode;1===t.childElementCount?t.remove():e.remove()}else this.buttons=this.colorschemeControlWrapper.querySelectorAll(".buttongroup-button"),this.colorschemeControlWrapper.addEventListener("click",this);this.select()}},s.select=function(){var e=this;this.buttons.forEach((function(t){var s=t.value===e.scheme||!t.value&&!e.scheme;t.parentNode.classList.toggle("buttongroup-item--active",s)}))},s.validate=function(e){return["light","dark"].indexOf(e)>-1},s.dispatch=function(e){"zappi"in window&&"function"==typeof window.zappi.postMessage&&window.zappi.postMessage({type:"colorscheme",action:e,scheme:this.scheme})},e}())}();